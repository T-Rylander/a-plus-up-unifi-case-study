# .env.example.secure
# ==============================================================================
# ETERNAL SECRETS TEMPLATE
# Status: v∞.1.0-eternal (locked forever)
# Purpose: Template for secrets management with 90-day rotation cycle
# 
# ⚠️ CRITICAL: This file should NEVER be committed to git with real values
# Use: Copy to .env (gitignored), fill with real secrets, validate before deploy
#
# SECRET ROTATION CYCLE:
# - Issued: [DATE] by [ADMIN]
# - Expires: 90 days (non-negotiable)
# - Rotation Window: 14 days before expiration (Plan new secrets)
# - Emergency Rotation: <1 hour if compromised (See CARTER-SECRETS.md)
# ==============================================================================

# ============================================================================
# CARTER MINISTRY: IDENTITY & ACCESS CONTROL (90-day rotation)
# ============================================================================

# LDAP/Active Directory (Future - Q2 2026)
LDAP_SERVER="ldap.yourdomain.com"           # LDAP server hostname
LDAP_PORT="389"                              # LDAP port (389 = plain, 636 = TLS)
LDAP_BIND_DN="cn=admin,dc=yourdomain,dc=com" # Privileged bind account
LDAP_BIND_PASSWORD="[ROTATE EVERY 90 DAYS]"  # ⚠️ CHANGE THIS - see ROTATION_SCHEDULE below
LDAP_SEARCH_BASE="ou=users,dc=yourdomain,dc=com"
LDAP_TLS_ENABLED="true"                      # Require TLS (true/false)

# UniFi Operator Account (Primary admin)
UNIFI_USERNAME="ubnt"                        # Default UniFi username
UNIFI_PASSWORD="[ROTATE EVERY 90 DAYS]"      # ⚠️ CHANGE THIS - UniFi admin password
UNIFI_CLOUDKEY_IP="192.168.1.1"              # UDM Pro Max IP address
UNIFI_API_PORT="8443"                        # UniFi API port
UNIFI_SITE_ID="default"                      # UniFi site identifier

# WiFi Network Passwords (Per-VLAN)
WIFI_STUDENTS_SSID="Students"
WIFI_STUDENTS_PASSWORD="[ROTATE EVERY 90 DAYS]"  # ⚠️ CHANGE THIS
WIFI_STUDENTS_SECURITY="wpa2"                    # wpa2/wpa3

WIFI_STAFF_SSID="Staff"
WIFI_STAFF_PASSWORD="[ROTATE EVERY 90 DAYS]"     # ⚠️ CHANGE THIS
WIFI_STAFF_SECURITY="wpa3"                       # wpa3 (staff should use strongest)

WIFI_GUEST_SSID="Guest"
WIFI_GUEST_PASSWORD="[ROTATE EVERY 90 DAYS]"     # ⚠️ CHANGE THIS
WIFI_GUEST_SECURITY="wpa2"
WIFI_GUEST_BANDWIDTH_LIMIT="50mbps"              # Guest bandwidth cap

# VoIP System (Yealink Phones)
YEALINK_PROVISIONING_SERVER="voip.yourdomain.com"  # Phone provisioning server
YEALINK_SIP_PROXY="sip.yourdomain.com"             # SIP server (e.g., Asterisk/FreePBX)
YEALINK_SIP_PASSWORD="[ROTATE EVERY 90 DAYS]"      # ⚠️ CHANGE THIS
YEALINK_SIP_PORT="5060"                            # SIP port
YEALINK_TLS_ENABLED="true"                         # Require TLS for SIP

# Verkada Cameras
VERKADA_API_KEY="[ROTATE EVERY 90 DAYS]"           # ⚠️ CHANGE THIS - Verkada API key
VERKADA_ORGANIZATION_ID="org_abc123xyz"            # Verkada org ID
VERKADA_COMMAND_API_URL="https://api.verkada.com"  # API endpoint

# Remote Management Access (SSH)
SSH_ADMIN_KEY_PUBLIC="ssh-rsa AAAAB3NzaC1yc..."   # SSH public key
SSH_ADMIN_KEY_PRIVATE="-----BEGIN PRIVATE KEY-----..." # SSH private key (⚠️ NEVER in .env, use key file)
SSH_PORT="22"                                       # SSH port
SSH_ENABLE_ROOT_LOGIN="false"                       # Disable root SSH

# Mattermost Integration (Notifications)
MATTERMOST_WEBHOOK_URL="https://mattermost.yourdomain.com/hooks/abc123def"  # Alert webhook
MATTERMOST_BOT_TOKEN="[ROTATE EVERY 90 DAYS]"     # ⚠️ CHANGE THIS
MATTERMOST_CHANNEL_ALERTS="#it-alerts"            # Incident channel

# ============================================================================
# BAUER MINISTRY: VERIFICATION & CI/CD (90-day rotation)
# ============================================================================

# GitHub Actions Secrets
GITHUB_TOKEN="ghp_[ROTATE EVERY 90 DAYS]"          # ⚠️ CHANGE THIS - GitHub personal access token
GITHUB_REPO_URL="https://github.com/yourepo/rylan-unifi-case-study"
GITHUB_BRANCH="main"

# Pre-commit Secret Scanning
BANDIT_CONFIG_PATH=".bandit"                        # Python security scanner config
SHELLCHECK_ENABLE="true"                            # Enable bash linting

# Testing Credentials
TEST_UNIFI_USERNAME="test_admin"                    # Test account
TEST_UNIFI_PASSWORD="[ROTATE EVERY 90 DAYS]"        # ⚠️ CHANGE THIS
TEST_DEVICE_MAC="00:11:22:33:44:55"                 # Test device for validation

# CI/CD Log Aggregation (Loki)
LOKI_API_URL="http://loki:3100"                     # Loki API endpoint
LOKI_USERNAME="loki_admin"                          # Loki user
LOKI_PASSWORD="[ROTATE EVERY 90 DAYS]"              # ⚠️ CHANGE THIS

# Incident Alerting (Webhooks)
ALERT_SLACK_WEBHOOK="https://hooks.slack.com/services/..."  # Slack alert URL (future)
ALERT_PagerDuty_KEY="[ROTATE EVERY 90 DAYS]"        # ⚠️ CHANGE THIS (if used)

# ============================================================================
# SUEHRING MINISTRY: PERIMETER & NETWORK (90-day rotation)
# ============================================================================

# UniFi Network Settings (Firewall/QoS)
UNIFI_FIREWALL_RULES_FILE="config/unifi/firewall-rules.json"
UNIFI_TRAFFIC_RULES_FILE="config/unifi/traffic-rules.json"
UNIFI_VLAN_CONFIG_FILE="config/unifi/vlan-config.json"

# Backup & Restore
BACKUP_LOCATION="/mnt/backup/unifi"                 # UDM backup path
BACKUP_ENCRYPTION_KEY="[ROTATE EVERY 90 DAYS]"      # ⚠️ CHANGE THIS - backup encryption
BACKUP_RETENTION_DAYS="90"                          # Keep 90 days of backups

# Network Monitoring (SNMP)
SNMP_COMMUNITY_STRING="[ROTATE EVERY 90 DAYS]"      # ⚠️ CHANGE THIS - SNMP community
SNMP_TRAP_DESTINATION="192.168.1.100"               # Monitoring server
SNMP_TRAP_PORT="162"                                # SNMP trap port

# DNS & DHCP
DHCP_LEASE_TIME="3600"                              # DHCP lease duration
DNS_PRIMARY="8.8.8.8"                               # Primary DNS
DNS_SECONDARY="1.1.1.1"                             # Secondary DNS

# ============================================================================
# AUDIT & COMPLIANCE LOGGING (Non-rotating)
# ============================================================================

# Logging & Audit Trail
LOG_LEVEL="INFO"                                    # Log verbosity (DEBUG/INFO/WARN/ERROR)
LOG_RETENTION_DAYS="90"                             # Retain logs 90 days
LOG_ENCRYPTION="true"                               # Encrypt logs at rest

# CIPA Compliance Markers
CIPA_COMPLIANCE_MODE="true"                         # Enable CIPA monitoring
CIPA_ALERT_EMAIL="compliance@yourdomain.com"        # Alert email for violations
PII_REDACTION_ENABLED="true"                        # Redact PII from logs

# ============================================================================
# SECRET ROTATION SCHEDULE (Maintain this spreadsheet)
# ============================================================================
#
# Rotation Schedule (Update when you rotate each secret):
# 
# Secret Name                          | Last Rotated | Next Rotation | Rotated By | Status
# -------------------------------------|--------------|---------------|-----------|--------
# LDAP_BIND_PASSWORD                   | 2024-12-19   | 2025-03-19    | admin01   | ✅ Active
# UNIFI_PASSWORD                       | 2024-12-19   | 2025-03-19    | admin01   | ✅ Active
# WIFI_STUDENTS_PASSWORD               | 2024-12-19   | 2025-03-19    | admin01   | ✅ Active
# WIFI_STAFF_PASSWORD                  | 2024-12-19   | 2025-03-19    | admin01   | ✅ Active
# WIFI_GUEST_PASSWORD                  | 2024-12-19   | 2025-03-19    | admin01   | ✅ Active
# YEALINK_SIP_PASSWORD                 | 2024-12-19   | 2025-03-19    | admin01   | ✅ Active
# VERKADA_API_KEY                      | 2024-12-15   | 2025-03-15    | admin02   | ✅ Active
# MATTERMOST_BOT_TOKEN                 | 2024-12-19   | 2025-03-19    | admin01   | ✅ Active
# GITHUB_TOKEN                         | 2024-12-19   | 2025-03-19    | admin01   | ✅ Active
# TEST_UNIFI_PASSWORD                  | 2024-12-19   | 2025-03-19    | admin01   | ✅ Active
# LOKI_PASSWORD                        | 2024-12-19   | 2025-03-19    | admin01   | ✅ Active
# BACKUP_ENCRYPTION_KEY                | 2024-12-19   | 2025-03-19    | admin01   | ✅ Active
# SNMP_COMMUNITY_STRING                | 2024-12-19   | 2025-03-19    | admin01   | ✅ Active
#
# INSTRUCTIONS FOR ROTATION:
# 1. 14 days BEFORE rotation date: Create new secret
# 2. Test new secret in DEV environment
# 3. On rotation date: 
#    - Deploy new secret to PROD
#    - Keep old secret active for 24h (for backward compat)
#    - After 24h: Disable old secret
#    - Update this schedule
# 4. If compromised: Immediate rotation (<1 hour)
#    - See CARTER-SECRETS.md for crisis response

# ============================================================================
# DEPLOYMENT VALIDATION
# ============================================================================
#
# Before deploying .env file to production:
# 
# ✅ CHECKLIST:
# [ ] All [ROTATE EVERY 90 DAYS] placeholders replaced with real values
# [ ] All passwords meet minimum requirements:
#     - Length: ≥20 characters
#     - Complexity: Mix of upper/lower/numbers/symbols
# [ ] All API keys verified (attempt test call)
# [ ] Backup of old secrets created (for rollback)
# [ ] .env file permissions: chmod 600 (readable by owner only)
# [ ] Pre-commit hook passes (no secrets in git)
# [ ] Tested in DEV environment first (not PROD immediately)
# [ ] All stakeholders notified of rotation
# [ ] Update rotation schedule above
# [ ] Archive old .env file in secure location (encrypted, 90-day retention)
#
# DEPLOY COMMAND:
# $ source .env  # Load secrets into current shell
# $ ./scripts/deploy-secrets.sh  # (Future script)
#
# ============================================================================
